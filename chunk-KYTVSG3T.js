import{a as ce,b as me,c as le,d as de,e as pe}from"./chunk-4WZXAEEZ.js";import{$ as c,Aa as S,Ba as l,C as g,Fa as J,G as z,Ga as X,H as p,Ha as ee,I as H,Ib as se,J as G,K as v,Ka as te,La as s,Ma as A,N as x,Na as P,O as b,P as O,Q,Sb as ue,Ta as re,Tb as fe,Ub as ge,V as q,Vb as _e,Wa as C,Y,a as j,b as L,da as T,db as ie,eb as oe,f as W,g as R,ha as y,hb as ae,ia as u,k as $,l as B,la as _,lb as ne,oa as f,pa as m,qa as w,qb as D,ra as K,s as V,sa as Z,ua as a,va as n,wa as h,x as U,xa as F,ya as N}from"./chunk-V5XRUDAT.js";var he={production:!1,apiUrl:"https://uselessfacts.jsph.pl/random.json"};var k=class t{constructor(i){this.http=i}API_URL=he.apiUrl;_isLoading=new R(!1);isLoading$=this._isLoading.asObservable();_error=new R(null);error$=this._error.asObservable();getRandomFact(){return this._isLoading.next(!0),this._error.next(null),this.http.get(this.API_URL).pipe(B(i=>i),V(this.handleError),U(()=>{this._isLoading.next(!1)}))}handleError=i=>{let e="An unknown error occurred!";return i.error instanceof ErrorEvent?e=`A client-side error occurred: ${i.error.message}`:e=`Server error ${i.status}: ${i.message}`,console.error(e),this._error.next(e),$(()=>new Error(e))};static \u0275fac=function(e){return new(e||t)(G(ne))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fe=["determinateSpinner"];function Se(t,i){if(t&1&&(O(),a(0,"svg",11),h(1,"circle",12),n()),t&2){let e=l();f("viewBox",e._viewBox()),c(),w("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),f("r",e._circleRadius())}}var Ce=new H("mat-progress-spinner-default-options",{providedIn:"root",factory:ke});function ke(){return{diameter:ve}}var ve=100,Me=10,xe=(()=>{class t{_elementRef=v(q);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=v(Y,{optional:!0}),r=v(Ce);this._noopAnimations=e==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=ve;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-Me)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=y({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(r,o){if(r&1&&J(Fe,5),r&2){let d;X(d=ee())&&(o._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(r,o){r&2&&(f("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",o.mode==="determinate"?o.value:null)("mode",o.mode),Z("mat-"+o.color),w("width",o.diameter,"px")("height",o.diameter,"px")("--mdc-circular-progress-size",o.diameter+"px")("--mdc-circular-progress-active-indicator-width",o.diameter+"px"),K("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate",o.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",C],diameter:[2,"diameter","diameter",C],strokeWidth:[2,"strokeWidth","strokeWidth",C]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(r,o){if(r&1&&(_(0,Se,2,8,"ng-template",null,0,re),a(2,"div",2,1),O(),a(4,"svg",3),h(5,"circle",4),n()(),Q(),a(6,"div",5)(7,"div",6)(8,"div",7),F(9,8),n(),a(10,"div",9),F(11,8),n(),a(12,"div",10),F(13,8),n()()()),r&2){let d=te(1);c(4),f("viewBox",o._viewBox()),c(),w("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),f("r",o._circleRadius()),c(4),m("ngTemplateOutlet",d),c(2),m("ngTemplateOutlet",d),c(2),m("ngTemplateOutlet",d)}},dependencies:[oe],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return t})();var be=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=u({type:t});static \u0275inj=p({imports:[se]})}return t})();function Ee(t,i){t&1&&(a(0,"div",6),h(1,"mat-spinner",7),a(2,"p",8),s(3,"Fetching a useless fact..."),n()())}function Re(t,i){if(t&1){let e=N();a(0,"div",9)(1,"mat-icon",10),s(2,"error_outline"),n(),a(3,"p",11),s(4,"Error:"),n(),a(5,"p",12),s(6),n(),a(7,"button",13),S("click",function(){x(e);let o=l();return b(o.fetchNewFact())}),s(8,"Try Again"),n()()}if(t&2){let e=l();c(6),A(e.error)}}function Oe(t,i){if(t&1){let e=N();a(0,"mat-card",14)(1,"mat-card-content",15)(2,"p",16),s(3),n()(),a(4,"mat-card-actions",17)(5,"button",18),S("click",function(){x(e);let o=l();return b(o.fetchNewFact())}),a(6,"mat-icon",19),s(7,"refresh"),n(),s(8," Get New Fact "),n(),a(9,"button",20),S("click",function(){x(e);let o=l();return b(o.toggleFavorite())}),a(10,"mat-icon",19),s(11),n(),s(12),n()()()}if(t&2){let e=l();c(3),P(' "',e.currentFact.text,'" '),c(6),m("color",e.isCurrentFactFavorite?"warn":"primary"),c(2),A(e.isCurrentFactFavorite?"favorite":"favorite_border"),c(),P(" ",e.isCurrentFactFavorite?"Remove from Favorites":"Add to Favorites"," ")}}var I=class t{constructor(i,e){this.factService=i;this.favoritesService=e}title="Random Fact Component";currentFact=null;isLoading=!1;error=null;isCurrentFactFavorite=!1;destroy$=new W;currentFactId=null;ngOnInit(){this.factService.isLoading$.pipe(g(this.destroy$)).subscribe(i=>{this.isLoading=i}),this.factService.error$.pipe(g(this.destroy$)).subscribe(i=>{this.error=i}),this.fetchNewFact(),this.favoritesService.favorites$.pipe(g(this.destroy$)).subscribe(i=>{this.currentFact&&this.currentFact.id?this.isCurrentFactFavorite=i.some(e=>e.id===this.currentFact.id):this.isCurrentFactFavorite=!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),console.log("Random Fact Component Destroyed")}fetchNewFact(){this.currentFact=null,this.currentFactId=null,this.factService.getRandomFact().pipe(g(this.destroy$)).subscribe({next:i=>{let e=L(j({},i),{id:i.id||this.favoritesService.generateUniqueId()});this.currentFact=e,this.currentFactId=e.id,this.isCurrentFactFavorite=this.favoritesService.isFavorite(this.currentFactId)}})}toggleFavorite(){if(!this.currentFact||!this.currentFact.id){console.warn("Cannot toggle favorite: No current fact or fact has no ID.");return}this.isCurrentFactFavorite?this.favoritesService.removeFavorite(this.currentFact.id):this.favoritesService.addFavorite(this.currentFact)}static \u0275fac=function(e){return new(e||t)(T(k),T(ce))};static \u0275cmp=y({type:t,selectors:[["app-random-fact"]],standalone:!1,decls:9,vars:3,consts:[[1,"w-full","max-w-4xl","mx-auto","py-4"],[1,"text-4xl","md:text-5xl","font-extrabold","text-text-dark","mb-6","tracking-tight","text-center"],[1,"text-lg","md:text-xl","text-text-muted","mb-8","max-w-2xl","mx-auto","text-center"],["class","flex flex-col items-center justify-center p-8",4,"ngIf"],["class","text-center p-8 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-md max-w-xl w-full mx-auto",4,"ngIf"],["class",`w-full max-w-2xl mx-auto p-8
               rounded-3xl shadow-xl border border-gray-100
               transform transition-all duration-300 ease-in-out
               hover:scale-[1.01] hover:shadow-2xl hover:border-primary-100`,4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","p-8"],["color","primary","diameter","50"],[1,"mt-4","text-lg","text-gray-700"],[1,"text-center","p-8","bg-red-100","border","border-red-400","text-red-700","rounded-lg","shadow-md","max-w-xl","w-full","mx-auto"],["color","warn",1,"text-4xl","!w-auto","!h-auto"],[1,"mt-2","text-lg","font-semibold"],[1,"text-sm"],["mat-raised-button","","color","accent",1,"mt-4",3,"click"],[1,"w-full","max-w-2xl","mx-auto","p-8","rounded-3xl","shadow-xl","border","border-gray-100","transform","transition-all","duration-300","ease-in-out","hover:scale-[1.01]","hover:shadow-2xl","hover:border-primary-100"],[1,"text-center"],[1,"text-2xl","md:text-3xl","font-medium","text-text-dark","leading-relaxed","italic"],[1,"!flex","!flex-col","justify-center","!mt-8","!space-y-4","md:!flex-row","md:!space-x-6","md:!space-y-0"],["mat-raised-button","","color","primary",1,"!w-full","md:!w-auto","py-3","px-6","text-lg","rounded-full",3,"click"],[1,"mr-2"],["mat-stroked-button","",1,"!w-full","md:!w-auto","py-3","px-6","text-lg","rounded-full",3,"click","color"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"h1",1),s(2," One Useless Fact at a Time "),n(),a(3,"p",2),s(4," Discover a random useless fact and add it to your favorites for later! "),n(),_(5,Ee,4,0,"div",3)(6,Re,9,1,"div",4),a(7,"div",0),_(8,Oe,13,4,"mat-card",5),n()()),e&2&&(c(5),m("ngIf",r.isLoading),c(),m("ngIf",r.error&&!r.isLoading),c(2),m("ngIf",r.currentFact&&!r.isLoading&&!r.error))},dependencies:[ie,me,de,le,ue,ge,xe],encapsulation:2})};var Te=[{path:"",component:I}],E=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=p({imports:[D.forChild(Te),D]})};var ye=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=p({imports:[ae,E,pe,fe,_e,be]})};export{ye as RandomFactModule};
